<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="es">
<head>
<!-- Generated by javadoc (12.0.2) on Mon Jul 13 12:29:57 CEST 2020 -->
<title>ConnectionHandlerImpl</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-07-13">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConnectionHandlerImpl";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConnectionHandlerImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.proxy.interceptor</a></div>
<h2 title="Class ConnectionHandlerImpl" class="title">Class ConnectionHandlerImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.proxy.interceptor.ConnectionHandlerImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a></code>, <code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">ConnectionHandlerImpl</span>
extends java.lang.Object
implements <a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a></pre>
<div class="block">Clase que implementa las operaciones de ConnectionHandler.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Pablo</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private <a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connHandler">connHandler</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#HTTP_OK">HTTP_OK</a></span></code></th>
<td class="colLast">
<div class="block">Línea de estado que se envía en las respuestas HTTP cuando el método de la
 petición es CONNECT (es decir, se trata del inicio de una comunicación segura
 mediante SSL).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.jboss.logging.Logger</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#LOG">LOG</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.net.Socket</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#socket">socket</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.net.Socket,com.proxy.interceptor.ConnectionHandler)">ConnectionHandlerImpl</a></span>&#8203;(java.net.Socket&nbsp;socket,
                     <a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a>&nbsp;connHandler)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>private <a href="httpOperation/response/IHttpResponse.html" title="interface in com.proxy.interceptor.httpOperation.response">IHttpResponse</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildResponse(com.proxy.interceptor.httpOperation.request.IHttpRequest,java.net.http.HttpResponse)">buildResponse</a></span>&#8203;(<a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;request,
             java.net.http.HttpResponse&lt;byte[]&gt;&nbsp;response)</code></th>
<td class="colLast">
<div class="block">Construye una respuesta HTTP.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closeSocket(java.net.Socket)">closeSocket</a></span>&#8203;(java.net.Socket&nbsp;socket)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configureRequest(com.proxy.interceptor.IHttpOperation)">configureRequest</a></span>&#8203;(<a href="IHttpOperation.html" title="interface in com.proxy.interceptor">IHttpOperation</a>&nbsp;request)</code></th>
<td class="colLast">
<div class="block">Método que, haciendo uso del patrón de diseño Decorator, envuelve varias
 funcionalidades relacionadas con la comprobación de si un Host pertenece a
 las diferentes listas de hosts peligrosos.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#configureResponse(com.proxy.interceptor.IHttpOperation)">configureResponse</a></span>&#8203;(<a href="IHttpOperation.html" title="interface in com.proxy.interceptor">IHttpOperation</a>&nbsp;response)</code></th>
<td class="colLast">
<div class="block">Método que, haciendo uso del patrón de diseño Decorator, envuelve las
 funcionalidades relacionadas con la comprobación de si una respuesta HTTP
 cumple los criterios de seguridad avanzados establecidos por el usuario en la
 pantalla de configuración.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectMethod(java.net.Socket,com.proxy.interceptor.httpOperation.request.IHttpRequest)">connectMethod</a></span>&#8203;(java.net.Socket&nbsp;socket,
             <a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;request)</code></th>
<td class="colLast">
<div class="block">Método que maneja las peticiones cuyo método HTTP es CONNECT.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>private byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaliciousRequestPage()">getMaliciousRequestPage</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleConnection(java.net.Socket,java.net.InetSocketAddress,boolean)">handleConnection</a></span>&#8203;(java.net.Socket&nbsp;socket,
                java.net.InetSocketAddress&nbsp;hostTarget,
                boolean&nbsp;sslConnection)</code></th>
<td class="colLast">
<div class="block">Método que, a partir de la información obtenida de un Socket, construye y configura 
 una petición para, finalmente, construir una respuesta y escribirla en el Socket.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isAResponseValidForErrorPage(com.proxy.interceptor.httpOperation.response.IHttpResponse)">isAResponseValidForErrorPage</a></span>&#8203;(<a href="httpOperation/response/IHttpResponse.html" title="interface in com.proxy.interceptor.httpOperation.response">IHttpResponse</a>&nbsp;response)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readOneLine(java.io.InputStream)">readOneLine</a></span>&#8203;(java.io.InputStream&nbsp;in)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>private <a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readRequest(java.io.InputStream,boolean)">readRequest</a></span>&#8203;(java.io.InputStream&nbsp;in,
           boolean&nbsp;isSSL)</code></th>
<td class="colLast">
<div class="block">Metodo que va leyendo carácter a carácter el contenido de la petición enviada
 al servidor, y lo va metiendo en un buffer.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendResponse(java.net.Socket,com.proxy.interceptor.httpOperation.request.IHttpRequest,java.lang.String,boolean)">sendResponse</a></span>&#8203;(java.net.Socket&nbsp;socket,
            <a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;req,
            java.lang.String&nbsp;uri,
            boolean&nbsp;maliciousRequest)</code></th>
<td class="colLast">
<div class="block">Método que, a partir de una URI, una petición HTTPRequest y un Socket donde
 escribir la respuesta, envía la mencionada respuesta dada por un sitio web.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setConnectionHandler(com.proxy.interceptor.ConnectionHandler)">setConnectionHandler</a></span>&#8203;(<a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a>&nbsp;connHandler)</code></th>
<td class="colLast">
<div class="block">Establece una referencia a un objeto de tipo ConnectionHandler.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#writeResponse(java.net.Socket,byte%5B%5D,com.proxy.interceptor.httpOperation.response.IHttpResponse,boolean,boolean)">writeResponse</a></span>&#8203;(java.net.Socket&nbsp;socket,
             byte[]&nbsp;responseBody,
             <a href="httpOperation/response/IHttpResponse.html" title="interface in com.proxy.interceptor.httpOperation.response">IHttpResponse</a>&nbsp;response,
             boolean&nbsp;maliciousRequest,
             boolean&nbsp;maliciousResponse)</code></th>
<td class="colLast">
<div class="block">Escribe la respuesta en el Stream obtenido de un Socket.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="HTTP_OK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HTTP_OK</h4>
<pre>private static final&nbsp;byte[] HTTP_OK</pre>
<div class="block">Línea de estado que se envía en las respuestas HTTP cuando el método de la
 petición es CONNECT (es decir, se trata del inicio de una comunicación segura
 mediante SSL).</div>
</li>
</ul>
<a id="connHandler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connHandler</h4>
<pre>private&nbsp;<a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a> connHandler</pre>
</li>
</ul>
<a id="socket">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>socket</h4>
<pre>private&nbsp;java.net.Socket socket</pre>
</li>
</ul>
<a id="LOG">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;org.jboss.logging.Logger LOG</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.net.Socket,com.proxy.interceptor.ConnectionHandler)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConnectionHandlerImpl</h4>
<pre>public&nbsp;ConnectionHandlerImpl&#8203;(java.net.Socket&nbsp;socket,
                             <a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a>&nbsp;connHandler)</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setConnectionHandler(com.proxy.interceptor.ConnectionHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setConnectionHandler</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setConnectionHandler&#8203;(<a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a>&nbsp;connHandler)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="ConnectionHandler.html#setConnectionHandler(com.proxy.interceptor.ConnectionHandler)">ConnectionHandler</a></code></span></div>
<div class="block">Establece una referencia a un objeto de tipo ConnectionHandler.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="ConnectionHandler.html#setConnectionHandler(com.proxy.interceptor.ConnectionHandler)">setConnectionHandler</a></code>&nbsp;in interface&nbsp;<code><a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>connHandler</code> - Objeto de tipo ConnectionHandler.</dd>
</dl>
</li>
</ul>
<a id="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;run()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a id="handleConnection(java.net.Socket,java.net.InetSocketAddress,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleConnection</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;handleConnection&#8203;(java.net.Socket&nbsp;socket,
                             java.net.InetSocketAddress&nbsp;hostTarget,
                             boolean&nbsp;sslConnection)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="ConnectionHandler.html#handleConnection(java.net.Socket,java.net.InetSocketAddress,boolean)">ConnectionHandler</a></code></span></div>
<div class="block">Método que, a partir de la información obtenida de un Socket, construye y configura 
 una petición para, finalmente, construir una respuesta y escribirla en el Socket.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="ConnectionHandler.html#handleConnection(java.net.Socket,java.net.InetSocketAddress,boolean)">handleConnection</a></code>&nbsp;in interface&nbsp;<code><a href="ConnectionHandler.html" title="interface in com.proxy.interceptor">ConnectionHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>socket</code> - Socket para leer/escribir información.</dd>
<dd><code>hostTarget</code> - Host al que va dirigida una petición.</dd>
<dd><code>sslConnection</code> - Parámetro que permite distinguir si una petición va hacia un Host que implementa
 HTTPS o no.</dd>
</dl>
</li>
</ul>
<a id="closeSocket(java.net.Socket)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeSocket</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;closeSocket&#8203;(java.net.Socket&nbsp;socket)</pre>
</li>
</ul>
<a id="sendResponse(java.net.Socket,com.proxy.interceptor.httpOperation.request.IHttpRequest,java.lang.String,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendResponse</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;sendResponse&#8203;(java.net.Socket&nbsp;socket,
                          <a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;req,
                          java.lang.String&nbsp;uri,
                          boolean&nbsp;maliciousRequest)</pre>
<div class="block">Método que, a partir de una URI, una petición HTTPRequest y un Socket donde
 escribir la respuesta, envía la mencionada respuesta dada por un sitio web.
 Se comprueba también si la petición es maliciosa atendiendo a la
 configuración del usuario. Si lo es, se muestra una página de error.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>socket</code> - Socket al que escribir la respuesta.</dd>
<dd><code>req</code> - Petición a partir de la cual se obtendrá cierta
                         información necesaria.</dd>
<dd><code>uri</code> - URI a la que enviar la petición.</dd>
<dd><code>maliciousRequest</code> - Define si una petición es maliciosa o no.</dd>
</dl>
</li>
</ul>
<a id="buildResponse(com.proxy.interceptor.httpOperation.request.IHttpRequest,java.net.http.HttpResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildResponse</h4>
<pre class="methodSignature">private&nbsp;<a href="httpOperation/response/IHttpResponse.html" title="interface in com.proxy.interceptor.httpOperation.response">IHttpResponse</a>&nbsp;buildResponse&#8203;(<a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;request,
                                    java.net.http.HttpResponse&lt;byte[]&gt;&nbsp;response)</pre>
<div class="block">Construye una respuesta HTTP.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - Petición HTTP.</dd>
<dd><code>response</code> - Objeto del paquete java.net que representa una respuesta
                 HTTP.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Una respuesta HTTP propia de la aplicación, NO la del paquete
         java.net.</dd>
</dl>
</li>
</ul>
<a id="writeResponse(java.net.Socket,byte[],com.proxy.interceptor.httpOperation.response.IHttpResponse,boolean,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeResponse</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;writeResponse&#8203;(java.net.Socket&nbsp;socket,
                           byte[]&nbsp;responseBody,
                           <a href="httpOperation/response/IHttpResponse.html" title="interface in com.proxy.interceptor.httpOperation.response">IHttpResponse</a>&nbsp;response,
                           boolean&nbsp;maliciousRequest,
                           boolean&nbsp;maliciousResponse)</pre>
<div class="block">Escribe la respuesta en el Stream obtenido de un Socket.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>socket</code> - Socket al que se escribirá la respuesta.</dd>
<dd><code>responseBody</code> - Cuerpo de la respuesta.</dd>
<dd><code>response</code> - Objeto del que se obtendrá la información necesaria
                          para escribir la respuesta.</dd>
<dd><code>maliciousRequest</code> - Decide si la petición es maliciosa o no. Si lo es,
                          no se escribe nada en el Socket.</dd>
<dd><code>maliciousResponse</code> - Decide si la respuesta es maliciosa o no. Si lo es,
                          se muestra una pantalla de error al usuario.</dd>
</dl>
</li>
</ul>
<a id="isAResponseValidForErrorPage(com.proxy.interceptor.httpOperation.response.IHttpResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAResponseValidForErrorPage</h4>
<pre class="methodSignature">private&nbsp;boolean&nbsp;isAResponseValidForErrorPage&#8203;(<a href="httpOperation/response/IHttpResponse.html" title="interface in com.proxy.interceptor.httpOperation.response">IHttpResponse</a>&nbsp;response)</pre>
</li>
</ul>
<a id="readRequest(java.io.InputStream,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRequest</h4>
<pre class="methodSignature">private&nbsp;<a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;readRequest&#8203;(java.io.InputStream&nbsp;in,
                                 boolean&nbsp;isSSL)</pre>
<div class="block">Metodo que va leyendo carácter a carácter el contenido de la petición enviada
 al servidor, y lo va metiendo en un buffer. Si encuentra un carácter que
 indica un fin de línea, termina de leer. Devuelve cadenas del siguiente
 estilo:
 
 CONNECT clients4.google.com:443 HTTP/1.1 Host: clients4.google.com:443
 Proxy-Connection: keep-alive User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64;
 x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.96 Safari/537.36</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>in</code> - Stream a partir del cual se obtiene toda la información
              necesaria para construir una petición.</dd>
<dd><code>isSSL</code> - Valor que define si una petición se dirige hacia un Host que
              implementa HTTPS o no.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>La petición HTTP construida.</dd>
</dl>
</li>
</ul>
<a id="readOneLine(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readOneLine</h4>
<pre class="methodSignature">private&nbsp;java.lang.String&nbsp;readOneLine&#8203;(java.io.InputStream&nbsp;in)</pre>
</li>
</ul>
<a id="connectMethod(java.net.Socket,com.proxy.interceptor.httpOperation.request.IHttpRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectMethod</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;connectMethod&#8203;(java.net.Socket&nbsp;socket,
                           <a href="httpOperation/request/IHttpRequest.html" title="interface in com.proxy.interceptor.httpOperation.request">IHttpRequest</a>&nbsp;request)</pre>
<div class="block">Método que maneja las peticiones cuyo método HTTP es CONNECT. Este método
 indica que la petición se dirige hacia un Host que implementa HTTPS, por lo
 que se delega la responsabilidad de la comunicación en un objeto de tipo
 AbstractSecureConnectionHandler.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>socket</code> - Socket del que se obtiene la información.</dd>
<dd><code>request</code> - Petición HTTP.</dd>
</dl>
</li>
</ul>
<a id="configureRequest(com.proxy.interceptor.IHttpOperation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configureRequest</h4>
<pre class="methodSignature">private&nbsp;boolean&nbsp;configureRequest&#8203;(<a href="IHttpOperation.html" title="interface in com.proxy.interceptor">IHttpOperation</a>&nbsp;request)</pre>
<div class="block">Método que, haciendo uso del patrón de diseño Decorator, envuelve varias
 funcionalidades relacionadas con la comprobación de si un Host pertenece a
 las diferentes listas de hosts peligrosos.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - Petición HTTP a partir de la cual obtendremos la información
                necesaria.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True si la petición es maliciosa, False si no.</dd>
</dl>
</li>
</ul>
<a id="configureResponse(com.proxy.interceptor.IHttpOperation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configureResponse</h4>
<pre class="methodSignature">private&nbsp;boolean&nbsp;configureResponse&#8203;(<a href="IHttpOperation.html" title="interface in com.proxy.interceptor">IHttpOperation</a>&nbsp;response)</pre>
<div class="block">Método que, haciendo uso del patrón de diseño Decorator, envuelve las
 funcionalidades relacionadas con la comprobación de si una respuesta HTTP
 cumple los criterios de seguridad avanzados establecidos por el usuario en la
 pantalla de configuración.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>response</code> - Respuesta HTTP a partir de la cual obtendremos la información
                 necesaria.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True si la respuesta es maliciosa, False si no.</dd>
</dl>
</li>
</ul>
<a id="getMaliciousRequestPage()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getMaliciousRequestPage</h4>
<pre class="methodSignature">private&nbsp;byte[]&nbsp;getMaliciousRequestPage()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConnectionHandlerImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
